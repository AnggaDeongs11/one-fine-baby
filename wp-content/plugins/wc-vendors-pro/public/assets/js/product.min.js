jQuery(function(d){var r,n;function t(){var e=d("#product-type").val(),t=d("#_virtual").is(":checkbox")?d("input#_virtual:checked").size():d("#_virtual").val(),a=d("#_downloadable").is(":checkbox")?d("input#_downloadable:checked").size():d("#_downloadable").val(),i=".hide_if_downloadable, .hide_if_virtual",r=".show_if_downloadable, .show_if_virtual, .show_if_external";d.each(wcv_frontend_product.product_types,function(e,t){i=i+", .hide_if_"+t,r=r+", .show_if_"+t}),d(i).show().removeClass("is_hidden"),d(i).find("input").removeClass("is_hidden"),d(r).hide().addClass("is_hidden"),d(r).find("input").addClass("is_hidden"),a&&(d(".show_if_downloadable").show().removeClass("is_hidden"),d(".show_if_downloadable").find("input").removeClass("is_hidden")),t&&(d(".show_if_virtual").show().removeClass("is_hidden"),d(".show_if_virtual").find("input").removeClass("is_hidden")),d(".show_if_"+e).show().removeClass("is_hidden"),d(".show_if_"+e).find("input").removeClass("is_hidden"),a&&(d(".hide_if_downloadable").hide().addClass("is_hidden"),d(".hide_if_downloadable").find("input").addClass("is_hidden")),t&&(d(".hide_if_virtual").hide().addClass("is_hidden"),d(".hide_if_virtual").find("input").addClass("is_hidden")),"grouped"==e&&(d(".linked_product").parent().addClass("active"),d("#linked_product").removeClass("hide-all").addClass("active")),d(".hide_if_"+e).hide().addClass("is_hidden"),d(".hide_if_"+e).find("input").addClass("is_hidden"),d("input#_manage_stock").change(),d(".wcv-form").length&&(d(".wcv-form").hasClass("wcv-form-exclude")||d(".wcv-form").parsley().reset())}function l(){var e=d(".wcv-gallery-image").length;return d("#product_images_container").data("gallery_max_upload")-1<e}function e(e,t){d(e).is(":checked")?(t.prop("disabled",!0),t.each(function(){d(this).is(":checkbox")?d(this).removeAttr("checked"):d(this).val("")})):t.prop("disabled",!1)}d("select#product-type").change(function(){var e=d(this).val();"variable"===e?(d("input#_manage_stock").change(),d("input#_downloadable").prop("checked",!1),d("input#_virtual").removeAttr("checked")):"grouped"===e?(d("input#_downloadable").prop("checked",!1),d("input#_virtual").removeAttr("checked")):"external"===e&&(d("input#_downloadable").prop("checked",!1),d("input#_virtual").removeAttr("checked")),t(),d("ul.wc-tabs li:visible").eq(0).find("a").click(),d("body").trigger("woocommerce-product-type-change",e,d(this)),d(".wcv-tabs").find("select.select2").select2()}).change(),d("input#_downloadable, input#_virtual").change(function(){t()}),d(".sale_price_dates_fields").each(function(){var e=!1;d(".sale_price_dates_fields").find("input").each(function(){""!=d(this).val()&&(e=!0)}),e?(d(".sale_schedule").hide(),d(".sale_price_dates_fields").show()):(d(".sale_schedule").show(),d(".sale_price_dates_fields").hide())}),d(".sale_schedule").on("click",function(){return d(".sale_price_dates_fields").show(),d(this).hide(),d(".cancel_sale_schedule").show(),!1}),d(".cancel_sale_schedule").on("click",function(){return d(".sale_price_dates_fields").hide(),d(this).hide(),d(".sale_schedule").show(),!1}),d("input#_manage_stock").change(function(){if(d(this).is(":checked"))d("div.stock_fields").show().removeClass("is_hidden"),d("div.stock_fields").find("input").removeClass("is_hidden"),d(".stock_status_field").hide(),d(".wcv-form").hasClass("wcv-form-exclude")||d(".wcv-form").parsley().reset();else{var e=d("select#product-type").val();d("div.stock_fields").hide().addClass("is_hidden"),d("div.stock_fields").find("input").addClass("is_hidden"),d(".stock_status_field:not( .hide_if_"+e+" )").show(),d(".wcv-form").hasClass("wcv-form-exclude")||d(".wcv-form").parsley().reset()}}).change(),d(".wcv-media-uploader-featured-delete").on("click",function(e){e.preventDefault(),d(".wcv-featuredimg").html(""),d("#_featured_image_id").val(""),d(".wcv-media-uploader-featured-delete").addClass("hidden"),d(".wcv-media-uploader-featured-add").removeClass("hidden")}),d(".wcv-media-uploader-featured-add").on("click",function(e){var t,a,i,r;return e.preventDefault(),i=d(".wcv-featuredimg").data("title"),r=d(".wcv-featuredimg").data("button_text"),void 0===t&&(t=wp.media({title:i,button:{text:r},multiple:!1})).on("select",function(){a=t.state().get("selection").first().toJSON(),d.trim(a.url.length)<0||(attachment_image_url=a.sizes.thumbnail?a.sizes.thumbnail.url:a.url,d(".wcv-featuredimg").append('<img src="'+attachment_image_url+'" alt="'+a.caption+'" title="'+a.title+'" style="max-width: 100%;" />'),d("#_featured_image_id").val(a.id),d(".wcv_featured_image_msg").html(""),d(".wcv-featuredimg").css("background-color","#e1e1e1"),d(".wcv-media-uploader-featured-add").addClass("hidden"),d(".wcv-media-uploader-featured-delete").removeClass("hidden"))}),t.open(),!1}),d(document).on("click",function(e){var t=d(".attachment.selected").length,a=d("#product_images_container").data("gallery_max_upload"),i=d("#product_images_container").data("gallery_max_selected_notice");a<t&&(d(".max-gallery-selected-warning").remove(),d(".media-toolbar-secondary").prepend('<div class="woocommerce-info max-gallery-selected-warning">'+i+"</div>"),d(".media-button-select").attr("disabled",!0)),t<=a&&(d(".max-gallery-selected-warning").remove(),d(".media-button-select").attr("disabled",!1))}),d("#product_images_container").on("click","a.delete",function(e){var t=d("#product_image_gallery");e.preventDefault(),d(this).closest("li.wcv-gallery-image").remove();var a="";return d("#product_images_container ul li.wcv-gallery-image").css("cursor","default").each(function(){var e=jQuery(this).attr("data-attachment_id");a=a+e+","}),t.val(a),d("#tiptip_holder").removeAttr("style"),d("#tiptip_arrow").removeAttr("style"),!1}),d(".wcv-media-uploader-gallery").on("click",function(e){return e.preventDefault(),function(){var a,i=d("#product_image_gallery"),r=d("#product_images_container ul.product_images"),n=i.val(),o=d(".wcv-media-uploader-gallery a");if(void 0===a)if((a=wp.media.frames.product_gallery=wp.media({title:o.data("choose"),button:{text:o.data("update")},states:[new wp.media.controller.Library({title:o.data("choose"),filterable:"all",multiple:!0})]})).on("select",function(){var e=a.state().get("selection");if(d(".max-gallery-images-exceeded-warning").remove(),count_selected_attachments=0,e.map(function(e){(e=e.toJSON()).id&&!l()&&(n=n?n+","+e.id:e.id,attachment_image=e.sizes.thumbnail?e.sizes.thumbnail.url:e.url,r.append('<li class="wcv-gallery-image" data-attachment_id="'+e.id+'"><img src="'+attachment_image+'" /><ul class="actions"><li><a href="#" class="delete" title="'+o.data("delete")+'"><i class="fa fa-times"></i></a></li></ul></li>'),d(".wcv_gallery_msg").html("")),count_selected_attachments++}),i.val(n),3<count_selected_attachments){var t='<div class="max-gallery-images-exceeded-warning">'+max_selected_notice+"</div>";d("#product_images_container").append(t)}}),a.on("close",function(e){d(".attachment.selected").removeClass("selected")}),l()){var e=d("#product_images_container").data("gallery_max_notice");alert(e)}else a.open();else a.open()}(),!1}),d("#files_download").on("click",".downloadable_files a.insert",function(){return d(this).closest(".downloadable_files").find("tbody").append(d(this).data("row")),!1}),d("#files_download").on("click",".downloadable_files a.delete",function(){return d(this).closest("tr").remove(),!1}),d(document).on("click",".upload_file_button",function(e){var t=d(this);if(n=t.closest("tr").find(".file_url"),file_id_field=t.closest("tr").find(".file_id"),file_display_field=t.closest("tr").find(".file_display"),e.preventDefault(),r)r.open();else{var a=[new wp.media.controller.Library({library:wp.media.query(),multiple:!0,title:t.data("choose"),priority:20,filterable:"uploaded"})];(r=wp.media.frames.downloadable_file=wp.media({title:t.data("choose"),library:{type:""},button:{text:t.data("update")},multiple:!0,states:a})).on("select",function(){var t="",a="",i=0;r.state().get("selection").map(function(e){a="file_url"==wcv_frontend_product.wcv_file_display?e.attributes.url:e.attributes.filename,(e=e.toJSON()).url&&(t=e.url),e.id&&(i=e.id)}),n.val(t),file_display_field.val(a),file_id_field.val(i)}),r.on("ready",function(){r.uploader.options.uploader.params={type:"downloadable_product"}}),r.open()}}),d(".downloadable_files tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65}),d("#_shipping_fee_national_disable").change(function(){e(d(this),d(".wcv-disable-national-input"))}),d("#_shipping_fee_national_free").change(function(){e(d(this),d("#_shipping_fee_national"))}),d("#_shipping_fee_international_disable").change(function(){e(d(this),d(".wcv-disable-international-input"))}),d("#_shipping_fee_international_free").change(function(){e(d(this),d("#_shipping_fee_international"))}),d("#shipping").on("click",".wcv_shipping_rates a.insert",function(){var e=d("#wcv_shipping_rates_table tbody tr").length,t=(t=d(this).data("row").replace('id="_wcv_shipping_overrides_"','id="_wcv_shipping_overrides_'+e+'"')).replace('name="_wcv_shipping_overrides_"','name="_wcv_shipping_overrides_'+e+'"');return d(this).closest(".wcv_shipping_rates").find("tbody").append(t).find("select").select2({placeholderOption:"first",width:"100%"}),!1}),d("#shipping").on("click",".wcv_shipping_rates a.delete",function(){return d(this).closest("tr").remove(),!1}),d(".wcv_shipping_rates tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65}),d(".select2").select2(),d(".category-select2").select2({maximumSelectionLength:wcv_frontend_product.category_limit,language:{maximumSelected:function(e){return 1!=e.maximum?wcv_frontend_product.select2_maximumSelected_plural:wcv_frontend_product.select2_maximumSelected_single},loadingMore:function(){return wcv_frontend_product.select2_loadingMore},errorLoading:function(){return wcv_frontend_product.select2_errorLoading},noResults:function(){return wcv_frontend_product.select2_noResults},searching:function(){return wcv_frontend_product.select2_searching},removeAllItems:function(){return wcv_frontend_product.select2_removeAllItems}}}),t(),e(d("#_shipping_fee_national_free"),d("#_shipping_fee_national")),e(d("#_shipping_fee_international_free"),d("#_shipping_fee_international")),e(d("#_shipping_fee_national_disable"),d(".wcv-disable-national-input")),e(d("#_shipping_fee_international_disable"),d(".wcv-disable-international-input")),d(".confirm_delete").on("click",function(e){confirm(d(this).data("confirm_text"))||e.preventDefault()});var a=d(".product_attributes").find(".woocommerce_attribute").get();a.sort(function(e,t){var a=parseInt(d(e).attr("rel"),10),i=parseInt(d(t).attr("rel"),10);return a<i?-1:i<a?1:0}),d(a).each(function(e,t){d(".product_attributes").append(t)}),d(".product_attributes .woocommerce_attribute").each(function(e,t){"none"!==d(t).css("display")&&d(t).is(".taxonomy")&&d("select.attribute_taxonomy").find('option[value="'+d(t).data("taxonomy")+'"]').attr("disabled","disabled")}),d(".wcv_product_attributes").on("click",".wcv-metabox h5",function(e){d(e.target).filter(":input, option, .sort").length||d(this).next(".wcv-metabox-content").stop().slideToggle()}).on("click",".expand_all",function(){return d(this).closest(".wcv_product_attributes").find(".wcv-metabox > .wcv-metabox-content").show(),!1}).on("click",".close_all",function(){return d(this).closest(".wcv_product_attributes").find(".wcv-metabox > .wcv-metabox-content").hide(),!1}),d(".wcv-metabox.closed").each(function(){d(this).find(".wcv-metabox-content").hide()}),d(function(e){function l(e){var t=d("#wcv-variation-attributes").data("variation_attr");return jQuery.isEmptyObject(t)||(delete t[e],d("#wcv-variation-attributes").data("variation_attr",t)),!1}function n(e,t,a){var i={},r=e.parent().data("taxonomy"),n=e.parent().data("index_value");if(d("#attribute_variation_"+n).is(":checked"))if(e.is("input")){var o=e.val().split(wcv_frontend_product.wc_deliminator);d.each(o,function(e,t){0<d.trim(t).length&&(i[d.trim(t).toLowerCase()]=d.trim(t))})}else{o=e.select2("data");d.each(o,function(e,t){i[t.id]=t.text})}jQuery.isEmptyObject(i)?l(r):function(e,t,a,i){var r=d("#wcv-variation-attributes").data("variation_attr");jQuery.isEmptyObject(r)&&(r={});var n={};n.values=e,n.position=a,n.name=t,n.label=i,r[t]=n,d("#wcv-variation-attributes").data("variation_attr",r)}(i,r,t,a)}function o(){d(".product_attributes .woocommerce_attribute").each(function(e,t){d(".attribute_position",t).val(parseInt(d(t).index(".product_attributes .woocommerce_attribute"),10));var a=d(this).data("index_value");n(t=d("#attribute_values_"+a),d("#attribute_position_"+a).val(),d(this).data("label"))})}d("button.add_attribute").on("click",function(){var e=d(".product_attributes .woocommerce_attribute").size(),t=d("select.attribute_taxonomy").val();if(t){var a=d(".product_attributes "),i=d("#product-type").val(),r={action:"wcv_json_add_attribute",taxonomy:t,i:e,security:wcv_frontend_product.wcv_add_attribute_nonce};return d.post(wcv_frontend_product.ajax_url,r,function(e){e.error?window.alert(e.error):(a.append(e),d("select.attribute_values").filter(":not(.select12-hidden-accessible)").select2(),"variable"!==i&&a.find(".enable_variation").hide(),d(document.body).trigger("wc-enhanced-select-init"),o(),d(document.body).trigger("woocommerce_added_attribute"))}),t&&(d("select.attribute_taxonomy").find('option[value="'+t+'"]').attr("disabled","disabled"),d("select.attribute_taxonomy").val("")),!1}}),d(".product_attributes").on("click","button.select_all_attributes",function(){var e=d(this).parent().data("index_value");return d("#attribute_values_"+e+" > option").prop("selected","selected"),d("#attribute_values_"+e).trigger("change"),!1}),d(".product_attributes").on("click","button.select_no_attributes",function(){var e=d(this).parent().data("index_value"),t=d(this).parent().data("taxonomy");return d("#attribute_values_"+e+" > option").removeAttr("selected"),d("#attribute_values_"+e).trigger("change"),d("#attribute_variation_"+e).is(":checked")&&l(t),!1}),d(".product_attributes").on("change",".attribute_values",function(){var e=d(this).parent().data("index_value"),t=d("#attribute_position_"+e).val(),a=d(this).closest(".woocommerce_attribute").data("label");n(d(this),t,a)}),d(".product_attributes").on("change",".wcv_variation_checkbox",function(){var e=d(this).parent().parent().parent().data("index_value"),t=d(this).closest(".woocommerce_attribute").data("taxonomy"),a=d(this).closest(".woocommerce_attribute").data("label"),i=d("#attribute_position_"+e).val(),r=d("#attribute_values_"+e);d(this).is(":checked")?n(r,i,a):l(t)}),d(".product_attributes").on("click",".remove_row",function(){if(window.confirm(wcv_frontend_product.remove_attribute)){var e=d(this).parent().parent();e.is(".taxonomy")?(e.find("select, input[type=text]").val(""),e.hide(),d(".attribute_taxonomy").find('option[value="'+e.data("taxonomy")+'"]').removeAttr("disabled")):(e.find("select, input[type=text]").val(""),e.hide(),o()),l(e.data("taxonomy"))}return!1}),d(".product_attributes").sortable({items:".woocommerce_attribute",cursor:"move",axis:"y",handle:"h5",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wcv-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.data("index_value");t.item.removeAttr("style"),o()}}),o(),d(".attribute_values").each(function(){var e=d(this).parent().data("index_value"),t=d("#attribute_position_"+e).val(),a=d(this).closest(".woocommerce_attribute").data("label");n(d(this),t,a)})}),d(".product_attributes").on("click","button.add_new_attribute",function(){d(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e=d(this).parent().data("index_value"),t=d("#attribute_values_"+e),a=d(this).parent().data("taxonomy"),i=window.prompt(wcv_frontend_product.new_attribute_prompt);if(i){var r={action:"wcv_json_add_new_attribute",taxonomy:a,term:i,security:wcv_frontend_product.wcv_add_attribute_nonce};d.post(wcv_frontend_product.ajax_url,r,function(e){e.error?window.alert(e.error):e.slug&&(t.append(d("<option />").attr("value",e.slug).prop("selected","selected").text(e.name)),t.trigger("change"),d(t).select2("destroy").select2()),d(".product_attributes").unblock()})}else d(".product_attributes").unblock();return!1}),d("#wcv-product-edit").submit(function(t){if(1==wcv_frontend_product.require_featured_image&&""===d("#_featured_image_id").val()&&(d(".wcv_featured_image_msg").html(wcv_frontend_product.require_featured_image_msg),d(".wcv-featuredimg").css("background-color","rgba(150,8,12,.55)"),t.preventDefault()),1==wcv_frontend_product.require_gallery_image&&""===d("#product_image_gallery").val()&&(d(".wcv_gallery_msg").html(wcv_frontend_product.require_gallery_image_msg),t.preventDefault()),1==wcv_frontend_product.require_download_file){var e=d(".download_file_table"),a=e.length,i=!0;d(".downloadable_files").parent();d(".downloadable_files").length&&(0==e.find(".download_file").length&&(i=!1),0<a?d(".download_file").each(function(e){""!==d(this).find("td.file_name").find("input").val()&&""!==d(this).find("td.file_url").find("input").val()||(i=!1)}):i=!1,i||(d(".downloadable_files").append('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_download_file_msg+"</span>"),d(".download_file_table").css({color:"#b94a48","background-color":"#f2dede",border:"1px solid #cc0000"}),t.preventDefault()))}d("li a.attributes").length&&(1==wcv_frontend_product.require_attributes&&(0<d(".woocommerce_attribute ").length?d(".wcv_attribute_data").each(function(e){d(this).find(".attribute_values").val()?(d(".attributes-validation-error").html(""),d("a.tabs-tab.attributes").css("background-color",""),d("a.tabs-tab.attributes").css("color","")):(d(".attributes-validation-error").html('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_attributes_msg+"</span>"),d("a.tabs-tab.attributes").css("background-color","rgba(150,8,12,.55)"),d("a.tabs-tab.attributes").css("color","rgba(255,255,255,.55)"),t.preventDefault())}):(d(".attributes-validation-error").html('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_attributes_msg+"</span><br />"),d("a.tabs-tab.attributes").css("background-color","rgba(150,8,12,.55)"),d("a.tabs-tab.attributes").css("color","rgba(255,255,255,.55)"),t.preventDefault())))})});